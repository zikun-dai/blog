<!DOCTYPE html><html lang="zh-CN"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="路由器配置"><title>router | Jake&#39;s Personal Blog</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Spectral:wght@600;700&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet"><style>:root{color-scheme:light;--bg: #f7f3ee;--surface: #fffaf2;--text: #1c1a17;--muted: #6f665b;--accent: #c4572e;--border: #e4dccf;--shadow: 0 12px 30px rgba(30, 24, 18, .08);--callout-note: #f0f6ff;--callout-tip: #eefaf2;--callout-warning: #fff6e6;--callout-danger: #ffecec}*,*:before,*:after{box-sizing:border-box}body{margin:0;font-family:"Source Sans 3",Helvetica Neue,Arial,sans-serif;background:radial-gradient(circle at top left,#fdf7ef,#f7f3ee,#f1ebe2);color:var(--text);line-height:1.7}a{color:var(--accent);text-decoration:none}a:hover{text-decoration:underline}header.site-header{padding:2.5rem 1.5rem 1.5rem;border-bottom:1px solid var(--border);background:#fffaf2e6;backdrop-filter:blur(6px);position:sticky;top:0;z-index:10}.site-title{font-family:Spectral,Georgia,serif;font-weight:700;font-size:1.8rem;margin:0}.site-nav{margin-top:.75rem;display:flex;gap:1.25rem;flex-wrap:wrap;font-size:.95rem}main{max-width:900px;margin:0 auto;padding:2rem 1.5rem 4rem}.card{background:var(--surface);border:1px solid var(--border);border-radius:18px;padding:1.5rem;box-shadow:var(--shadow)}.post-list{display:grid;gap:1.25rem}.post-meta{color:var(--muted);font-size:.9rem}.post-title{font-family:Spectral,Georgia,serif;font-size:1.6rem;margin:.25rem 0 .5rem}.post-content{font-size:1.05rem}.tag-list{display:flex;gap:.5rem;flex-wrap:wrap;margin:.5rem 0 0;padding:0;list-style:none}.tag{border:1px solid var(--border);border-radius:999px;padding:.2rem .7rem;font-size:.85rem;background:#fff}.callout{border-left:4px solid var(--accent);padding:.75rem 1rem;border-radius:12px;margin:1rem 0;background:var(--callout-note)}.callout-tip{background:var(--callout-tip);border-left-color:#338a55}.callout-warning{background:var(--callout-warning);border-left-color:#d28b26}.callout-danger{background:var(--callout-danger);border-left-color:#c73b3b}footer.site-footer{margin-top:4rem;color:var(--muted);font-size:.9rem;text-align:center;padding-bottom:2rem}@media(max-width:720px){header.site-header{position:static}.site-title{font-size:1.5rem}main{padding:1.5rem 1.25rem 3rem}}
</style></head> <body> <header class="site-header"> <div class="site-title">Jake&#39;s Personal Blog</div> <nav class="site-nav"> <a href="/">Home</a> <a href="/tags/">Tags</a> <a href="/categories/">Categories</a> </nav> </header> <main>  <article class="card post-content"> <p class="post-meta"> 2026/1/14  </p> <h1 class="post-title">router</h1> <ul class="tag-list"> <li class="tag">tech</li> </ul> <h2 id="路由器基础--计网复习">路由器基础 &#x26; 计网复习<a aria-hidden="true" tabindex="-1" href="#路由器基础--计网复习"><span class="icon icon-link"></span></a></h2>
<h3 id="软路由">软路由<a aria-hidden="true" tabindex="-1" href="#软路由"><span class="icon icon-link"></span></a></h3>
<p>进行dhcp、nat等操作，相当于ac
这一步可以直接设置VPN</p>
<h3 id="硬路由">硬路由<a aria-hidden="true" tabindex="-1" href="#硬路由"><span class="icon icon-link"></span></a></h3>
<p>只负责无线/有线连接设备，相当于ap</p>
<h3 id="旁路由">旁路由<a aria-hidden="true" tabindex="-1" href="#旁路由"><span class="icon icon-link"></span></a></h3>
<p>接在软路由或者硬路由下面，本身联通外网
在路由器/需要翻墙的设备中设置网关和DNS为旁路由IP
appletv、局域网的任意设备都可以作为旁路由（最好是长时间保持开机的设备，mac mini、appletv、nas等低功耗设备最佳）
旁路由出了问题，直接把网关改回主路由</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> 测试一下电脑开梯子作为网关，这样可以给switch开梯子</li>
<li class="task-list-item"><input type="checkbox" disabled> 测一下蒲公英游戏组网
<img src="router/DCAA2D48-2CE0-4F57-AE1F-C0E53C145353.jpeg" alt="： @客网日记" style="zoom: 25%;"></li>
</ul>
<h3 id="https转发和旁路由类似">https转发（和旁路由类似）<a aria-hidden="true" tabindex="-1" href="#https转发和旁路由类似"><span class="icon icon-link"></span></a></h3>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>export http_proxy=http://10.48.5.165:7890（本机ip或者局域网其他ip均可）</span></span>
<span class="line"><span>export https_proxy=$http_proxy</span></span>
<span class="line"><span>export ALL_PROXY=$http_proxy</span></span>
<span class="line"><span></span></span></code></pre>
<p>这样本机的https请求就会转发到指定ip的7890端口</p>
<ul>
<li>电脑VPN开代理模式，终端没网，通过这种方式来在终端访问VPN</li>
<li>服务器没有管理员权限，安装clash复杂，可以通过这种方式挂VPN</li>
<li>需要借用别人的VPN时，对方把7890端口暴露出来即可访问（Windows自带防火墙，ubuntu平时防火墙关着需要预防一下）</li>
</ul>
<h3 id="pppoe">pppoe<a aria-hidden="true" tabindex="-1" href="#pppoe"><span class="icon icon-link"></span></a></h3>
<p>拨号，相当于光猫（通过网线而不是通过光纤）</p>
<h3 id="dhcp">dhcp<a aria-hidden="true" tabindex="-1" href="#dhcp"><span class="icon icon-link"></span></a></h3>
<p>依托上级网络，上级有网就有网</p>
<h3 id="有线中继bridgeap">有线中继/bridge/ap<a aria-hidden="true" tabindex="-1" href="#有线中继bridgeap"><span class="icon icon-link"></span></a></h3>
<p>不开dhcp和nat，相当于校园网的一个ap，ip地址分发直接走校园网的ac，相当于直接连接NJU-WLAN
一个ac下接很多ap，单一核心节点的辐射结构（区别于mesh的网络结构）</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked disabled> 试一下路由器有线中继</li>
</ul>
<h3 id="mesh">mesh<a aria-hidden="true" tabindex="-1" href="#mesh"><span class="icon icon-link"></span></a></h3>
<p>虽然有主路由，但整体可以形成网络，有线/无线回程时会寻路，以便最快回到主路由</p>
<p>有线组网时子路由相当于ap，但ap不负责dhcp和nat，mesh的子路由会进行（是否仍在同一个网段？还是说只是Wi-Fi名字一样，可以自动切换</p>
<p>无线组网
新建了一个局域网，WAN通过无线传输</p>
<h3 id="蓝牙和蓝牙mesh">蓝牙和蓝牙mesh<a aria-hidden="true" tabindex="-1" href="#蓝牙和蓝牙mesh"><span class="icon icon-link"></span></a></h3>
<p>蓝牙是点对点，手机-》耳机、手机-〉音箱，依赖单一中心节点，超出手机的蓝牙范围就失效
mesh的子节点之间也可以通信，mesh本意就是网格（三维模型的三角面片），覆盖范围更广</p>
<h3 id="nat">nat<a aria-hidden="true" tabindex="-1" href="#nat"><span class="icon icon-link"></span></a></h3>
<p>网络地址转发，局域网内的所有子设备都转发到路由器IP来上网
虚拟机guest ip转发到物理机host ip来上网，电脑相当于路由器，给虚拟机分配一个局域网ip
可以在vmware或者virtualbox中将虚拟机的22端口映射到localhost的高端口，物理机就可以ssh访问虚拟机了（映射到0.0.0.0的话局域网其他设备也可以访问）</p>
<h3 id="桥接bridge">桥接bridge<a aria-hidden="true" tabindex="-1" href="#桥接bridge"><span class="icon icon-link"></span></a></h3>
<ul>
<li>虚拟机直接越过物理机，路由器给分IP（拓扑：路由器-》物理机-〉虚拟机）</li>
<li>设备直接越过路由器，校园网给分ip（拓扑：校园网-》路由器-〉设备）</li>
<li>再或者，设备直接越过校园网，获得公网ip（ipv6默认就是公网）（拓扑：公网-》校园网-〉设备）</li>
</ul>
<h3 id="校园网打洞">校园网打洞<a aria-hidden="true" tabindex="-1" href="#校园网打洞"><span class="icon icon-link"></span></a></h3>
<h3 id="tailscale">tailscale<a aria-hidden="true" tabindex="-1" href="#tailscale"><span class="icon icon-link"></span></a></h3>
<h3 id="nat回环">nat回环<a aria-hidden="true" tabindex="-1" href="#nat回环"><span class="icon icon-link"></span></a></h3>
<p>本机guestip：3389映射到路由器hostip：1103
上级网络其他设备当然可以通过hostip：1103来访问，因为同一网段
本机直接访问hostip的话，访问请求传到路由器，路由器处理之后映射回本机，走了一个环（发卡形状）</p>
<h3 id="localhost本地回环">localhost本地回环<a aria-hidden="true" tabindex="-1" href="#localhost本地回环"><span class="icon icon-link"></span></a></h3>
<p>本机访问本机</p> </article>  </main> <footer class="site-footer">Built with Astro.</footer> </body></html>